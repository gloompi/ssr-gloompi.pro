(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){},41:function(e,t,a){e.exports=a(83)},46:function(e,t,a){},72:function(e,t,a){},76:function(e,t,a){},80:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(35),o=a.n(r),s=(a(46),a(11)),i=a(12),l=a(6),u=a(7),d=a(9),m=a(8),p=a(10),h=a(85),f=a(86),v=a(3),g=a(15),E=a(37),b=a(14),_="Beejee-Test",k="https://uxcandy.com/~shapoval/test-task-backend/",O="admin",C="123",j=Object(b.c)({signed:null}),y="".concat(_,"/").concat("authentication","/SIGNIN_ADMIN"),w="".concat(_,"/").concat("authentication","/SIGNOUT_ADMIN"),S=a(16),N=a.n(S),D=a(17),x=a(18),T=a.n(x),A="".concat(k,"?developer=").concat("gloompi","&sort_direction=desc"),I="".concat(k,"/create/?developer=").concat("gloompi"),R="".concat(k,"/edit/"),U=Object(b.c)({data:new b.a,error:null,loaded:null,count:0}),F="".concat(_,"/").concat("dataStore","/FETCH_DATA_REQUEST"),L="".concat(_,"/").concat("dataStore","/FETCH_DATA_SUCCESS"),M="".concat(_,"/").concat("dataStore","/FETCH_DATA_ERROR"),B="".concat(_,"/").concat("dataStore","/CREATE_DATA_REQUEST"),P="".concat(_,"/").concat("dataStore","/CREATE_DATA_SUCCESS"),W="".concat(_,"/").concat("dataStore","/CREATE_DATA_ERROR"),H="".concat(_,"/").concat("dataStore","/EDIT_DATA_REQUEST"),J="".concat(_,"/").concat("dataStore","/EDIT_DATA_SUCCESS"),Q="".concat(_,"/").concat("dataStore","/EDIT_DATA_ERROR"),G=function(e){var t=e.page,a=void 0===t?1:t,n=e.sortBy,c=void 0===n?"id":n;return function(){var e=Object(D.a)(N.a.mark(function e(t){var n,r,o,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:F}),e.prev=1,e.next=4,T.a.get("".concat(A,"&sort_field=").concat(c,"&page=").concat(a));case 4:n=e.sent,r=n.data,o=r.message,s=r.status,t({type:L,payload:{status:s,message:o}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:M,payload:{error:e.t0}});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()},$=Object(g.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new j;switch((arguments.length>1?arguments[1]:void 0).type){case y:return localStorage.setItem("auth",!0),e.set("signed",!0);case w:return localStorage.setItem("auth",!1),e.set("signed",!1);default:return e}},dataStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new U,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case F:return e.set("loaded",!1);case L:return"ok"!==n.status?e.set("error",n.message):e.set("data",n.message.tasks).set("count",n.message.total_task_count).set("loaded",!0).set("error",!1);case M:var c=n.error;return e.set("error",c).set("loaded",!0);case B:return e.set("loaded",!1);case P:return"ok"!==n.status?e.set("error",n.message):e.update("data",function(e){return e.unshift(n.message),e.pop(),e}).set("count",n.message.total_task_count).set("loaded",!0);default:return e}}}),q=Object(g.d)($,{},Object(g.a)(E.a)),z=(a(72),a(32),Object(v.b)(function(e){return{signed:e.auth.signed}},{fetchData:G,signOut:function(){return{type:w}}})(function(e){var t=e.handleClick,a=e.fetchData,n=e.signOut,r=e.signed;return c.a.createElement("nav",{className:"mnu"},c.a.createElement("ul",{className:"mnu__list"},c.a.createElement("li",{className:"mnu__item"},c.a.createElement("button",{className:"mnu__add-btn",onClick:function(){return t("addCard",!0)}})),c.a.createElement("li",{className:"mnu__item"},c.a.createElement("select",{className:"mnu__sort",name:"sort",onChange:function(e){return a({sortBy:e.target.value})}},c.a.createElement("option",{value:"id"},"None"),c.a.createElement("option",{value:"username"},"Username"),c.a.createElement("option",{value:"email"},"Email"),c.a.createElement("option",{value:"status"},"Status"))),c.a.createElement("li",{className:"mnu__item"},c.a.createElement("button",{className:"mnu__admin-btn",onClick:function(){return r?n():t("admin",!0)}},r?"Sign Out":"Sign In"))))})),K=a(38),V=[{key:"username",name:"UserName"},{key:"email",name:"Email"},{key:"text",name:"Text"}],X=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=!1,n=a.props.createTask,c=new FormData;if(V.forEach(function(e){var n=e.key;Object(K.isEmpty)(a.state[n])&&(t=!0,a.setState(function(e){return Object(i.a)({},e,{warning:!0})})),c.append(n,a.state[n])}),t)return null;a.setState(function(e){return Object(i.a)({},e,{warning:!1})}),n(c),a.props.handleClick("addCard",!1)},a.handleClickOutside=function(e){a.form.current.contains(e.target)||a.props.handleClick("addCard",!1)},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(function(t){return Object(i.a)({},t,Object(s.a)({},e,n))})}},a.form=c.a.createRef();var n={warning:!1};return V.forEach(function(e){var t=e.key;n[t]=""}),a.state=n,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,t=this.props,a=t.open,n=t.handleClick,r=this.state.warning;return c.a.createElement("div",{className:"add-card ".concat(a?"active":"")},c.a.createElement("form",{ref:this.form,className:"add-card__form"},r&&c.a.createElement("h3",{style:{color:"red"}},"All fields must be filled in"),V.map(function(t){var a=t.key,n=t.name;return"text"===a?c.a.createElement("textarea",{key:a,className:"add-card__input ".concat(a),name:a,value:e.state[a],placeholder:n,onChange:e.handleChange(a)}):c.a.createElement("input",{key:a,className:"add-card__input ".concat(a),name:a,type:"email"===a?"email":"text",value:e.state[a],placeholder:n,onChange:e.handleChange(a)})}),c.a.createElement("button",{className:"add-card__btn",onClick:this.handleSubmit},"Add Task")),c.a.createElement("button",{className:"add-card__close",onClick:function(){return n("addCard",!1)}},"\xd7"))}}]),t}(n.Component),Y=Object(v.b)(null,{createTask:function(e){return function(){var t=Object(D.a)(N.a.mark(function t(a){var n,c,r,o;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:B}),t.prev=1,t.next=4,T.a.post(I,e);case 4:n=t.sent,c=n.data,r=c.message,o=c.status,a({type:P,payload:{message:r,status:o}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:W,payload:{error:t.t0}});case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()}})(X),Z=(a(76),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.login,c=t.password,r=a.props,o=r.signIn,s=r.handleClick;"".concat(c)===C&&n===O?(o(),s("admin",!1)):a.setState(function(e){return Object(i.a)({},e,{warning:!0})})},a.handleClickOutside=function(e){a.form.current.contains(e.target)||a.props.handleClick("admin",!1)},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(function(t){return Object(i.a)({},t,Object(s.a)({},e,n))})}},a.form=c.a.createRef(),a.state={warning:!1,login:"",password:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){JSON.parse(localStorage.getItem("auth"))&&this.props.signIn(),window.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this.props,t=e.open,a=e.handleClick,n=this.state.warning;return c.a.createElement("div",{className:"add-card ".concat(t?"active":"")},c.a.createElement("form",{ref:this.form,className:"add-card__form"},n&&c.a.createElement("h3",{style:{color:"red"}},"Login or password is not correct"),c.a.createElement("input",{className:"add-card__input",name:"login",type:"text",value:this.state.login,placeholder:"Login",onChange:this.handleChange("login")}),c.a.createElement("input",{className:"add-card__input",name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange("password")}),c.a.createElement("button",{className:"add-card__btn",onClick:this.handleSubmit},"Sign In")),c.a.createElement("button",{className:"add-card__close",onClick:function(){return a("admin",!1)}},"\xd7"))}}]),t}(n.Component)),ee=Object(v.b)(null,{signIn:function(){return{type:y}}})(Z),te=(a(33),a(23)),ae=a.n(te),ne=a(39),ce=a.n(ne),re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){return function(t){var n=t.target.value;a.setState(function(t){return Object(i.a)({},t,Object(s.a)({},e,n))})}},a.handleEtid=function(e){var t=a.props,n=t.editData,c=t.status,r=t.text,o=c!==a.state.status,i=r!==a.state.text;if(a.setState(function(t){return Object(s.a)({},e,!t[e])}),a.state[e]&&(o||i)){var l="",u=new FormData;if(o){var d=encodeURI(a.state.status).replace(ae.a.uri);l="status=".concat(d),u.append("status",a.state.status)}if(i){var m=encodeURI(a.state.text).replace(ae.a.uri);l=o?"".concat(l,"&text=").concat(m):"text=".concat(m),u.append("text",a.state.text)}l="".concat(l,"&token=beejee");var p=ce()(l);u.append("token","beejee"),u.append("signature",p),n({id:e,formData:u})}},a.state={text:e.text,status:e.status},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.id,r=t.username,o=t.email,s=t.signed;return c.a.createElement(n.Fragment,null,s&&c.a.createElement("button",{className:"list__item-edit",onClick:function(){return e.handleEtid(a)}},this.state[a]?"Done":"Edit"),c.a.createElement("p",null,c.a.createElement("b",null,"User"),": ",r),c.a.createElement("p",null,c.a.createElement("b",null,"Email"),": ",o),c.a.createElement("p",null,c.a.createElement("b",null,"Text"),": ",this.state[a]?c.a.createElement("input",{value:this.state.text,onChange:this.handleChange("text")}):this.state.text),s&&this.state[a]&&c.a.createElement("p",null,c.a.createElement("b",null,"Status"),":",c.a.createElement("select",{value:this.state.status,onChange:this.handleChange("status")},c.a.createElement("option",{value:"0"},"0"),c.a.createElement("option",{value:"10"},"10"))))}}]),t}(n.Component),oe=Object(v.b)(null,{editData:function(e){var t=e.id,a=e.formData;return function(){var e=Object(D.a)(N.a.mark(function e(n){var c,r,o,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:H}),e.prev=1,e.next=4,T.a.post("".concat(R).concat(t,"/?developer=").concat("gloompi"),a);case 4:c=e.sent,r=c.data,o=r.message,s=r.status,n({type:J,payload:{message:o,status:s}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n({type:Q,payload:{error:e.t0}});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}})(re),se=(a(80),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={activePage:1},a.handleClick=function(e){var t=a.props.fetchData;a.setState({activePage:e}),t({page:e})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.count,a=this.state.activePage,n=function e(t){return t?e(t-1).concat(t):[]}(Math.ceil(t/3)),r=a<3?0:a-3,o=a>n.length-3?n.length:a+3;return c.a.createElement("ul",{className:"pagination__list"},n.slice(r,o).map(function(t){return c.a.createElement("li",{key:t,className:"pagination__item"},c.a.createElement("button",{className:"pagination__button ".concat(a===t?"active":""),onClick:function(){return e.handleClick(t)}},t))}))}}]),t}(n.Component)),ie=Object(v.b)(function(e){return{count:e.dataStore.count}},{fetchData:G})(se),le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){var e=a.props,t=e.fetchData;e.loaded||t({})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.signed,a=e.data,r=e.loaded;return e.error?c.a.createElement("h2",null,"Error while retrieving data!"):c.a.createElement(n.Fragment,null,r?c.a.createElement("ul",{className:"list"},a.map(function(e){var a=e.id,n=e.status;return c.a.createElement("li",{key:a,className:"list__item ".concat("10"==="".concat(n)?"done":"")},c.a.createElement(oe,Object.assign({signed:t},e)))})):c.a.createElement("h2",null,"Loading..."),c.a.createElement(ie,null))}}]),t}(n.Component),ue=Object(v.b)(function(e){var t=e.dataStore;return{signed:e.auth.signed,data:t.data,loaded:t.loaded,error:t.error}},{fetchData:G})(le),de=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={addCard:!1,admin:!1},a.handleClick=function(e,t){a.setState(function(a){return Object(i.a)({},a,Object(s.a)({},e,t))})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(h.a,null,c.a.createElement(v.a,{store:q},c.a.createElement("div",{className:"app"},c.a.createElement("header",{className:"app__header"},c.a.createElement("h1",{className:"app__title"},"Task Manager"),c.a.createElement("aside",{className:"app__menu"},c.a.createElement(z,{handleClick:this.handleClick}))),c.a.createElement(Y,{open:this.state.addCard,handleClick:this.handleClick}),c.a.createElement(ee,{open:this.state.admin,handleClick:this.handleClick}),c.a.createElement(f.a,{path:"/",exact:!0,component:ue}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.a1086c5c.chunk.js.map